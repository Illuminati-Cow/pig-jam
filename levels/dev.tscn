[gd_scene load_steps=30 format=3 uid="uid://pidibbjycllu"]

[ext_resource type="Script" uid="uid://di5uw2k8bytm4" path="res://scripts/dev.torch" id="1_mp74a"]
[ext_resource type="PackedScene" uid="uid://dxw7cledbpiia" path="res://addons/proto-csgs/proto_csg_box_3d.tscn" id="1_x8peg"]
[ext_resource type="Texture2D" uid="uid://cej3yoosomfd2" path="res://addons/proto-csgs/textures/dark/texture_13.png" id="2_2it8a"]
[ext_resource type="Material" uid="uid://b12qc2augolq8" path="res://materials/prototype_material.tres" id="2_8etgp"]
[ext_resource type="Script" uid="uid://b1unx03vcgyv6" path="res://addons/proto_shape/proto_ramp/proto_ramp.gd" id="3_hqxoo"]
[ext_resource type="Script" uid="uid://csjccrhj5wnx7" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="4_35d1g"]
[ext_resource type="PackedScene" uid="uid://gy25w82lmvhy" path="res://entities/player.tscn" id="4_273jf"]
[ext_resource type="Script" uid="uid://8umksf8e80fw" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="5_lv7ry"]
[ext_resource type="Script" uid="uid://b8hhnqsugykly" path="res://addons/phantom_camera/scripts/resources/camera_3d_resource.gd" id="6_lv7ry"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="7_t7ade"]
[ext_resource type="PackedScene" uid="uid://cixam5x57fa5u" path="res://entities/hooked_pig.tscn" id="11_mp74a"]
[ext_resource type="PackedScene" uid="uid://ch4htauors71g" path="res://entities/props/hanger_rail.tscn" id="12_mp74a"]
[ext_resource type="PackedScene" uid="uid://dhr66jmk148bq" path="res://entities/props/hanger_rail_junction.tscn" id="13_1sof2"]
[ext_resource type="PackedScene" uid="uid://xvayq6cqitep" path="res://entities/pig.tscn" id="14_6ip0e"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_5g1ut"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_g3ky8"]
sky_material = SubResource("ProceduralSkyMaterial_5g1ut")

[sub_resource type="Environment" id="Environment_x8peg"]
background_mode = 2
sky = SubResource("Sky_g3ky8")
tonemap_mode = 2

[sub_resource type="Resource" id="Resource_273jf"]
script = ExtResource("5_lv7ry")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_t7ade"]
script = ExtResource("6_lv7ry")
keep_aspect = 1
cull_mask = 1048575
h_offset = 0.0
v_offset = 0.0
projection = 0
fov = 75.0
size = 1.0
frustum_offset = Vector2(0, 0)
near = 0.05
far = 4000.0
metadata/_custom_type_script = "uid://b8hhnqsugykly"

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_273jf"]
dof_blur_far_enabled = true

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_6ip0e"]
dof_blur_far_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_hvsbd"]
vertices = PackedVector3Array(2.75, 1.5, -6.83704, 4.5, 1.5, -6.83704, 4.5, 1.5, -59.337, 2.25, 1.5, -6.33704, -59.25, 1.5, -59.337, -59.25, 1.5, -4.33704, 2.25, 1.5, -4.33704, 7, 1.5, -6.33704, 7, 1.5, -4.83704, 59.25, 1.5, -5.08704, 6.5, 1.5, -6.83704, 59.25, 1.5, -59.337, 3.75, 3.5, -5.33704, 3.75, 3.5, -0.587036, 5.25, 3.5, -0.587036, 5.25, 3.5, -5.33704, 4, 1.5, -5.08704, 4, 1.5, -0.837036, 5.25, 1.5, -0.837036, 5.25, 1.5, -5.08704, 7, 1.5, -0.0870361, 59.25, 1.5, 0.162964, -59.25, 1.5, -1.58704, 2.25, 1.5, -1.58704, 3.75, 1.5, 59.163, 3.75, 1.5, 1.66296, 2.25, 1.5, 0.412964, -59.25, 1.5, 59.163, 7, 1.5, 1.41296, 6.5, 1.5, 1.66296, 6.5, 1.5, 59.163, 59.25, 1.5, 59.163, 4.75, 2, 0.912964, 4.5, 1.75, 1.66296)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(0, 3, 2), PackedInt32Array(2, 3, 4), PackedInt32Array(4, 3, 5), PackedInt32Array(3, 6, 5), PackedInt32Array(9, 8, 7), PackedInt32Array(10, 1, 2), PackedInt32Array(7, 10, 9), PackedInt32Array(9, 10, 11), PackedInt32Array(11, 10, 2), PackedInt32Array(15, 14, 12), PackedInt32Array(12, 14, 13), PackedInt32Array(19, 18, 16), PackedInt32Array(16, 18, 17), PackedInt32Array(8, 9, 20), PackedInt32Array(20, 9, 21), PackedInt32Array(5, 6, 22), PackedInt32Array(22, 6, 23), PackedInt32Array(25, 24, 26), PackedInt32Array(26, 24, 27), PackedInt32Array(26, 27, 22), PackedInt32Array(22, 23, 26), PackedInt32Array(28, 20, 21), PackedInt32Array(28, 21, 29), PackedInt32Array(29, 21, 30), PackedInt32Array(30, 21, 31), PackedInt32Array(32, 29, 33), PackedInt32Array(33, 29, 30), PackedInt32Array(33, 30, 24), PackedInt32Array(24, 25, 33)]
agent_radius = 0.75

[sub_resource type="BoxMesh" id="BoxMesh_5g1ut"]

[sub_resource type="BoxShape3D" id="BoxShape3D_g3ky8"]
size = Vector3(119.997, 1, 120)

[sub_resource type="BoxShape3D" id="BoxShape3D_6ip0e"]
size = Vector3(2.0061, 2.37891, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_604n7"]
resource_local_to_scene = true
albedo_texture = ExtResource("2_2it8a")
uv1_offset = Vector3(0.5, 0.5, 0.5)
uv1_triplanar = true
uv1_world_triplanar = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_6ip0e"]
resource_local_to_scene = true
albedo_texture = ExtResource("2_2it8a")
uv1_offset = Vector3(0.5, 0.5, 0.5)
uv1_triplanar = true
uv1_world_triplanar = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_etbdi"]
resource_local_to_scene = true
albedo_texture = ExtResource("2_2it8a")
uv1_offset = Vector3(0.5, 0.5, 0.5)
uv1_triplanar = true
uv1_world_triplanar = true

[sub_resource type="GDScript" id="GDScript_etbdi"]
resource_name = "BTTreeView"
script/source = "extends BehaviorTreeView

var bt

func _ready() -> void:
	bt = $\"../../Pig\".get_node(^\"BTPlayer\")
	
func _physics_process(delta: float) -> void:
	update_tree(BehaviorTreeData.create_from_bt_instance(bt.get_bt_instance()))
"

[node name="Dev" type="Node3D"]
script = ExtResource("1_mp74a")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866024, -0.433016, 0.250001, 0, 0.499998, 0.866026, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_x8peg")

[node name="Player" parent="." instance=ExtResource("4_273jf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.01, 1.8746, 3.252)
input_ray_pickable = false

[node name="PhantomCamera3D" type="Node3D" parent="." node_paths=PackedStringArray("follow_target")]
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 3.01, 5.5446, 6.082)
top_level = true
script = ExtResource("4_35d1g")
follow_mode = 2
follow_target = NodePath("../Player")
tween_resource = SubResource("Resource_273jf")
camera_3d_resource = SubResource("Resource_t7ade")
attributes = SubResource("CameraAttributesPractical_273jf")
follow_offset = Vector3(0, 3.67, 2.83)
follow_damping = true
metadata/_custom_type_script = "uid://csjccrhj5wnx7"

[node name="Camera3D" type="Camera3D" parent="."]
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 3.01, 5.5446, 6.082)
attributes = SubResource("CameraAttributesPractical_6ip0e")

[node name="PhantomCameraHost" type="Node" parent="Camera3D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("7_t7ade")
metadata/_custom_type_script = "uid://bd046eokvcnu2"

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_hvsbd")

[node name="Floor" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
collision_layer = 5

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/Floor"]
transform = Transform3D(120, 0, 0, 0, 1, 0, 0, 0, 120, 0, 0, 0)
material_override = ExtResource("2_8etgp")
mesh = SubResource("BoxMesh_5g1ut")
skeleton = NodePath("../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0059879, 0, -0.0870361)
shape = SubResource("BoxShape3D_g3ky8")

[node name="ProtoRamp" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 4, 1, 0)
script = ExtResource("3_hqxoo")
type = 0
collisions_enabled = false
width = 2.0
height = 1.0
depth = 2.001
anchor = 7
anchor_fixed = true
fill = 1.0
material = ExtResource("2_8etgp")
metadata/_custom_type_script = "uid://b1unx03vcgyv6"

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/ProtoRamp"]
collision_layer = 5
metadata/material = "metal"

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/ProtoRamp/StaticBody3D"]
transform = Transform3D(1, 7.81024e-08, -4.81448e-08, -7.81024e-08, 0.449288, -0.893387, -4.81448e-08, 0.893387, 0.449288, -1.0058, 0.0187764, -0.841179)
shape = SubResource("BoxShape3D_6ip0e")

[node name="ProtoCSGBox3D3" parent="NavigationRegion3D" instance=ExtResource("1_x8peg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.5, 2.003, -3.005)
size = Vector3(3, 2, 6)
material = SubResource("StandardMaterial3D_604n7")

[node name="Rails" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.729172, 0)

[node name="MeatHook" parent="Rails" instance=ExtResource("11_mp74a")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -1.7431, 4.05253, -3)

[node name="HangerRail" parent="Rails" instance=ExtResource("12_mp74a")]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, -5.4808, 4.14703, -3)
surface_material_override/0 = SubResource("StandardMaterial3D_6ip0e")

[node name="Junction" parent="Rails/HangerRail" instance=ExtResource("13_1sof2")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, 0, 0)

[node name="HangerRail2" parent="Rails" instance=ExtResource("12_mp74a")]
transform = Transform3D(-7.35137e-08, 0, -1, 0, 1, 0, 1, 0, -7.35137e-08, -2.57854, 4.14703, -3)
surface_material_override/0 = SubResource("StandardMaterial3D_etbdi")

[node name="Pig" parent="." instance=ExtResource("14_6ip0e")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 3.02829, 0.919417, 5.76316)
run_speed = 5.0
max_acceleration = 20.0
ride_height = 1.0
ride_spring_strength = 600.0
debug_path = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="BehaviorTreeView" type="BehaviorTreeView" parent="CanvasLayer"]
anchors_preset = -1
anchor_left = 0.778
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -0.760132
grow_horizontal = 0
grow_vertical = 2
script = SubResource("GDScript_etbdi")

[connection signal="footstep" from="Player" to="." method="_on_player_footstep"]
